machine:
  timezone: Europe/London
  python:
    version: 2.7.5  #default version on Centos 7
  pre:
    - sudo apt-get -y install rpm  libsasl2-dev libldap2-dev libssl-dev python-virtualenv
    - sudo mkdir -p /opt/cantemo/python/
    - sudo chown -R ubuntu /opt/cantemo/python/

dependencies:
  pre:
    - pip install boto  #only required for build/upload to s3

deployment:
  maindeploy:
    branch: /.*/
    commands:
      - chmod a+x setup.py
      - ./setup.py sdist
      - ./setup.py awsupload --bucket ${UPLOAD_BUCKET} --path gnmvidispine --region eu-west-1  --acl public-read
      - bash ./buildrpms.sh